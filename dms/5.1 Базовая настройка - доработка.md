Доделать следующие пункты:

- b. Запретите парольную аутентификацию. Аутентификация пользователя sshuser должна происходить только при помощи ключей.
- c. Измените стандартный ssh порт на 2023.
- d. На CLI-HQ сконфигурируйте клиент для автоматического подключения к SRV-HQ и SRV-BR под пользователем sshuser. При подключении автоматически должен выбираться корректный порт. Создайте пользователя sshuser на CLI-HQ для обеспечения такого сетевого доступа.

### Выполнение:

#### CLI-HQ:

- Создаём пользователя **sshuser** с паролем **P@ssw0rd**:
    - открываем **Меню** далее **Администрирование,** затем **Центр управления системой**:
![[Pasted image 20240212192518.png]]
- вводим пароль пользователя **root** нажимаем **ОК**:
![[Pasted image 20240212192531.png]]
- в разделе **Пользователя** выбираем **Локальные учётные записи**:
![[Pasted image 20240212192547.png]]
- вводим имя пользователя **sshuser** нажимаем **Создать**:
![[Pasted image 20240212192600.png]]
- задаём **пароль** - **P@ssw0rd** для пользователя **sshuser** и нажимаем применить:
![[Pasted image 20240212192613.png]]
- Выполняем вход из под пользователя **sshuser**:
![[Pasted image 20240212192625.png]]
![[Pasted image 20240212192638.png]]

- генерируем ключевую пару для доступа по **ssh**:

```
ssh-keygen -t rsa
```
![[Pasted image 20240212192651.png]]
- настраиваем клиент для автоматического подключения к **SRV-HQ** и **SRV-BR** под пользователем **sshuser:**

```
vim .ssh/config
```
![[Pasted image 20240212192707.png]]
где:

**Host** - имя для подключения, таким образом будет достаточно выполнить команду: _**ssh srv-hq.company.prof**_ **-** для подключения к **SRV-HQ** под пользователем **sshuser** используя **2023** порт

- передаём публичный ключ на **SRV-HQ**:

```
ssh-copy-id sshuser@10.0.10.2
```
![[Pasted image 20240212192723.png]]
### SRV-HQ:

в конфигурационной файле **/etc/openssh/sshd_config** - правим параметры в соответствии с [задание](https://sysahelper.ru/mod/resource/view.php?id=176 "Задание")м:

```
vim /etc/openssh/sshd_config
```

- - меняем стандартный порт (22) на порт **2023**;
![[Pasted image 20240212192742.png]]
- разрешаем аутентификацию по **ключу**:
- запрещаем **парольную аутентификацию**;
![[Pasted image 20240212192756.png]]
- Перезапускаем службу **sshd**:

```
systemctl restart sshd
```

- Проверяем:
    - работа **ssh** на порту **2023**:
![[Pasted image 20240212192811.png]]
	- подключение с клиента:
![[Pasted image 20240212192828.png]]
- передаём публичный ключ на **SRV-BR**:

```
ssh-copy-id sshuser@10.0.20.2
```
![[Pasted image 20240212192946.png]]
### SRV-BR:

Аналогично **SRV-HQ,** результат:
![[Pasted image 20240212192957.png]]
